<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="index-page">
        <h1>Welcome to the AR App</h1>
        <button id="start-ar">Start AR</button>
        <a id="quick-look" rel="ar" href="model/wombat-model.usdz" style="display:none;">
            <!--<img src="quick-look-icon.png" alt="View in AR">-->
        </a>
    </div>
    <div id="ar-view" style="display:none;">
        <p id="ar-text">Tap to place</p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/webxr-polyfill@latest/build/webxr-polyfill.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.126.1/examples/jsm/loaders/GLTFLoader.js"></script>
    <script src="app.js"></script>
    <script>
        document.getElementById("start-ar").addEventListener("click", startAR);

        function startAR() {
            if (isIOS()) {
                document.getElementById('quick-look').click();
            } else {
                // Android Scene Viewer Intent
                const modelUrl = `${window.location.origin}/model/wombat-model.glb`;
                const intentUrl = `intent://arvr.google.com/scene-viewer/1.0?file=${modelUrl}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;end;`;
                const anchor = document.createElement('a');
                anchor.setAttribute('rel', 'ar');
                anchor.setAttribute('href', intentUrl);
                anchor.click();
            }
        }

        function isIOS() {
            return /iPhone|iPad|iPod/i.test(navigator.userAgent);
        }
    </script>
</body>
</html>
